apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: sysdigcloud-postgresql
spec:
{{- if eq .Values.storageClassProvisioner "hostPath" }}
  template:
    spec:
      volumes:
        - name: data
          hostPath:
            type: DirectoryOrCreate
            path: {{ .Values.hostPathCustomPaths.postgresql }}
{{- else }}
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: {{ .Values.pvStorageSize.large.postgresql }}
        storageClassName: {{ .Values.storageClassName }}
{{- end }}
